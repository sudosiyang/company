<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	<script type="text/javascript" src="js/zepto.js"></script>
	<script type="text/javascript" src="js/gmu.js"></script>
	<link rel="stylesheet" type="text/css" href="css/gmu.css">
	<link rel="stylesheet" type="text/css" href="css/index.css">
	<title>TODOS</title>
</head>
<body>
	<div>
		<div class="ui-refresh">
		<div class="ui-refresh-up"></div>
		<ul class="data-list"></ul>
		
		<!--setup方式带有class为ui-refresh-down或ui-refresh-up的元素必须加上，用于放refresh按钮-->
	</div>
	</div>
	
	<script type="text/javascript">
	$('.ui-refresh').refresh({
     load: function (dir, type) {
         var me = this;
         $.getJSON('../../data/refresh.php', function (data) {
             var $list = $('.data-list'),
                     html = (function (data) {      //数据渲染
                         var liArr = [];
                         $.each(data, function () {
                             liArr.push(this.html);
                         });
                         return liArr.join('');
                     })(data);
             $list[dir == 'up' ? 'prepend' : 'append'](html);
             me.afterDataLoading();    //数据加载完成后改变状态
         });
     }
 });
	</script>
</body>
</html>